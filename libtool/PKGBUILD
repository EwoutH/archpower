# Maintainer:  Bart≈Çomiej Piotrowski <bpiotrowski@archlinux.org>
# Contributor: Allan McRae <allan@archlinux.org>
# Contributor: judd <jvinet@zeroflux.org>

# NOTE: requires rebuilt with each new gcc version

pkgname=libtool
pkgver=2.4.6
pkgrel=1
_gccver=8.2.1
pkgdesc='A generic library support script'
arch=(x86_64 powerpc64le)
url='http://www.gnu.org/software/libtool'
license=(GPL)
groups=(base-devel)
depends=(tar glibc)
makedepends=("gcc>=$_gccver") # git help2man)
checkdepends=(gcc-fortran)
provides=("libltdl=$pkgver" "libtool-multilib=$pkgver")
conflicts=(libltdl libtool-multilib)
replaces=(libltdl libtool-multilib)
source=(http://ftpmirror.gnu.org/libtool/libtool-${pkgver}.tar.xz)
md5sums=('SKIP')

#prepare() {
#  cd libtool
#  git submodule init
#  git submodule update
#  autoreconf -fiv
#  ./bootstrap
#}

build() {
  cd libtool-${pkgver}
  ./configure --prefix=/usr lt_cv_sys_lib_dlsearch_path_spec="/usr/lib"
  make
}

check() {
  cd libtool-${pkgver}
  make check gl_public_submodule_commit=
}

package() {
  cd libtool-${pkgver}
  make DESTDIR="$pkgdir" install
}
